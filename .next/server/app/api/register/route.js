"use strict";(()=>{var e={};e.id=569,e.ids=[569],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},67570:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>c,staticGenerationAsyncStorage:()=>w});var a={};s.r(a),s.d(a,{POST:()=>d});var t=s(49303),i=s(88716),n=s(60670),o=s(87070),p=s(83493),u=s(90455);async function d(e){let{email:r,name:s,password:a,tags:t}=await e.json();if(!r||!a)return o.NextResponse.json({message:"Email i hasło są wymagane"},{status:400});if(await p.prisma.user.findUnique({where:{email:r}}))return o.NextResponse.json({message:"Użytkownik już istnieje"},{status:400});let i=await (0,u.hashPassword)(a);return await p.prisma.user.create({data:{email:r,name:s,password:i,tags:t||""}}),o.NextResponse.json({message:"Użytkownik zarejestrowany"})}let l=new t.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/register/route",pathname:"/api/register",filename:"route",bundlePath:"app/api/register/route"},resolvedPagePath:"/workspaces/metzlii/app/api/register/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:w,serverHooks:c}=l,g="/api/register/route";function h(){return(0,n.patchFetch)({serverHooks:c,staticGenerationAsyncStorage:w})}},90455:(e,r,s)=>{s.d(r,{L:()=>o});var a=s(53797),t=s(83493),i=s(42023),n=s.n(i);let o={providers:[(0,a.Z)({name:"Credentials",credentials:{email:{label:"Email",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)return null;let r=await t.prisma.user.findUnique({where:{email:e.email}});return r&&r.password&&await n().compare(e.password,r.password)?{id:r.id+"",email:r.email}:null}})],pages:{signIn:"/login"},session:{strategy:"jwt"},callbacks:{jwt:async({token:e,user:r})=>(r&&(e.id=r.id),e),session:async({session:e,token:r})=>(r&&(e.user.id=r.id),e)}}},83493:()=>{new(require("@prisma/client")).PrismaClient}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[276,210,972],()=>s(67570));module.exports=a})();